<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js"></script>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css"
      rel="stylesheet"
    />

    <title>Document</title>
  </head>

  <body>
    <style>
      .marker {
        display: block;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        padding: 0;
      }
    </style>
    <h2>
      <label for="">Show me all of the upcoming WAR Zones between: </label>
    </h2>
    <input id="dateInput1" type="date" />
    <label> and </label>
    <input id="dateInput2" type="date" />
    <button id="theButton" onclick="getEvents()">Ok... show them to me!</button>
    <div id="map" style="width: 100%; height: 400px"></div>
    <script>
      let eventList = [
        {
          name: "WAR Zone at New England Gold #2",
          date: "2021-07-24",
          location: [-71.39364532928666, 42.06056832361408],
          url:
            "https://www.wellruntournaments.com/7-24-2021-warzone-at-new-england-gold-2/",
        },
        {
          name: "WAR Zone at Rev #7",
          date: "2021-07-25",
          location: [-83.62387655810528, 42.64291534371152],
          url:
            "https://www.wellruntournaments.com/7-25-2021-sunday-war-zone-rev-7/",
        },
        {
          name: "WAR Zone at Wesley Chapel",
          date: "2021-07-25",
          location: [-82.4323511063095, 28.19972317574855],
          url:
            "https://www.wellruntournaments.com/7-25-21-the-warzone-wesley-chapel/",
        },
        {
          name: "WAR Zone at Raw ATC",
          date: "2021-08-07",
          location: [-71.40218582929221, 41.86203085737668],
          url: "https://www.wellruntournaments.com/7-10-21-warzone-raw-atc/",
        },
        {
          name:
            "The Alpha Girls and Dynamic Wrestling present: Girls WAR Zone Wrestling Competition",
          date: "2021-08-07",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/2021/04/30/8-7-2021-the-alpha-girls-and-dynamic-wrestling-present-girls-war-zone-wrestling-competition/",
        },
        {
          name: "WAR Zone at Dynamic #12",
          date: "2021-08-08",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/2021/02/22/8-8-2021-war-zone-12-dynamic/",
        },
        {
          name: "WAR Zone at Total Turf #1",
          date: "2021-08-15",
          location: [-75.14514552565993, 39.739494229418405],
          url:
            "https://www.wellruntournaments.com/2021/02/22/8-8-2021-war-zone-12-dynamic/",
        },
        {
          name: "Affordable Duels at Dynamic",
          date: "2021-01-01",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/affordable-duals-at-dynamic-in-hauppauge-ny/",
        },
        {
          name: "WAR Zone at La Bombonera #1",
          date: "2021-08-28",
          location: [-75.59442994411177, 39.646283461379795],
          url:
            "https://www.wellruntournaments.com/8-28-2021-war-zone-la-bombonera-2/",
        },
        {
          name: "WAR Zone at Carmel Sports",
          date: "2021-09-04",
          location: [-73.65723932671771, 41.41190197366361],
          url:
            "https://www.wellruntournaments.com/9-4-21-war-zone-carmel-sports/",
        },
        {
          name: "WAR Zone at New England Gold #3",
          date: "2021-09-18",
          location: [-71.39364532928666, 42.06056832361408],
          url: "https://www.wellruntournaments.com/4237-2/",
        },
        {
          name: "WAR Zone at Dynamic #13",
          date: "2021-09-19",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/2021/02/22/9-19-2021-war-zone-13-dynamic/",
        },
        {
          name: "WAR Zone at Total Turf #2",
          date: "2021-09-25",
          location: [-75.14514552565993, 39.739494229418405],
          url:
            "https://www.wellruntournaments.com/9-25-2021-war-zone-total-turf-2/",
        },
        {
          name: "WAR Zone at NY Fit Fest",
          date: "2021-09-25",
          location: [-73.65751380564772, 40.58844118379961],
          url:
            "https://www.wellruntournaments.com/9-25-2021-war-zone-ny-fit-fest/",
        },
        {
          name: "WAR Zone at La Bombonera #2",
          date: "2021-10-02",
          location: [-75.59442994411177, 39.646283461379795],
          url:
            "https://www.wellruntournaments.com/8-28-2021-war-zone-la-bombonera-2/",
        },
        {
          name: "WAR Zone at Metuchen Sports Center #1",
          date: "2021-10-03",
          location: [-74.37314035654786, 40.53332966294376],
          url:
            "https://www.wellruntournaments.com/10-3-2021-war-zone-metuchen-sports-center-1/",
        },
        {
          name: "WAR Zone Panhandle Preseason Kickoff",
          date: "2021-10-16",
          location: [-84.22243944306271, 30.384050747604494],
          url:
            "https://www.wellruntournaments.com/10-23-21-panhandle-preseason-kickoff/",
        },
        {
          name: "WAR Zone at Dynamic #14",
          date: "2021-10-17",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/2021/02/22/10-17-2021-war-zone-14-dynamic/",
        },
        {
          name: "WAR Zone at Total Turf #3",
          date: "2021-11-06",
          location: [-75.14514552565993, 39.739494229418405],
          url: "https://www.wellruntournaments.com/4104-2/",
        },
        {
          name: "WAR Zone at Metuchen Sports Center #2",
          date: "2021-11-21",
          location: [-74.37314035654786, 40.53332966294376],
          url:
            "https://www.wellruntournaments.com/11-21-2021-war-zone-metuchen-sports-center-2/",
        },
        {
          name: "WAR Zone at New England Gold #4",
          date: "2021-12-04",
          location: [-71.39364532928666, 42.06056832361408],
          url: "https://www.wellruntournaments.com/4241-2/",
        },
        {
          name: "WAR Zone at Kings Park #3",
          date: "2021-12-19",
          location: [-73.24999207349386, 40.890566338192755],
          url:
            "https://www.wellruntournaments.com/12-19-2021-war-zone-kings-park-3/",
        },
        {
          name: "WAR Zone at Kings Park #4",
          date: "2022-01-06",
          location: [-73.24999207349386, 40.890566338192755],
          url:
            "https://www.wellruntournaments.com/1-16-2022-war-zone-kings-park-4/",
        },
        {
          name: "WAR Zone at New England Gold #2",
          date: "2021-07-24",
          location: [-71.39364532928666, 42.06056832361408],
          url:
            "https://www.wellruntournaments.com/7-24-2021-warzone-at-new-england-gold-2/",
        },
        {
          name: "WAR Zone at Rev #7",
          date: "2021-07-25",
          location: [-83.62387655810528, 42.64291534371152],
          url:
            "https://www.wellruntournaments.com/7-25-2021-sunday-war-zone-rev-7/",
        },
        {
          name: "WAR Zone at Wesley Chapel",
          date: "2021-07-25",
          location: [-82.4323511063095, 28.19972317574855],
          url:
            "https://www.wellruntournaments.com/7-25-21-the-warzone-wesley-chapel/",
        },
        {
          name: "WAR Zone at Raw ATC",
          date: "2021-08-07",
          location: [-71.40218582929221, 41.86203085737668],
          url: "https://www.wellruntournaments.com/7-10-21-warzone-raw-atc/",
        },
        {
          name:
            "The Alpha Girls and Dynamic Wrestling present: Girls WAR Zone Wrestling Competition",
          date: "2021-08-07",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/2021/04/30/8-7-2021-the-alpha-girls-and-dynamic-wrestling-present-girls-war-zone-wrestling-competition/",
        },
        {
          name: "WAR Zone at Dynamic #12",
          date: "2021-08-08",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/2021/02/22/8-8-2021-war-zone-12-dynamic/",
        },
        {
          name: "WAR Zone at Total Turf #1",
          date: "2021-08-15",
          location: [-75.14514552565993, 39.739494229418405],
          url:
            "https://www.wellruntournaments.com/2021/02/22/8-8-2021-war-zone-12-dynamic/",
        },
        {
          name: "Affordable Duels at Dynamic",
          date: "2021-01-01",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/affordable-duals-at-dynamic-in-hauppauge-ny/",
        },
        {
          name: "WAR Zone at La Bombonera #1",
          date: "2021-08-28",
          location: [-75.59442994411177, 39.646283461379795],
          url:
            "https://www.wellruntournaments.com/8-28-2021-war-zone-la-bombonera-2/",
        },
        {
          name: "WAR Zone at Carmel Sports",
          date: "2021-09-04",
          location: [-73.65723932671771, 41.41190197366361],
          url:
            "https://www.wellruntournaments.com/9-4-21-war-zone-carmel-sports/",
        },
        {
          name: "WAR Zone at New England Gold #3",
          date: "2021-09-18",
          location: [-71.39364532928666, 42.06056832361408],
          url: "https://www.wellruntournaments.com/4237-2/",
        },
        {
          name: "WAR Zone at Dynamic #13",
          date: "2021-09-19",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/2021/02/22/9-19-2021-war-zone-13-dynamic/",
        },
        {
          name: "WAR Zone at Total Turf #2",
          date: "2021-09-25",
          location: [-75.14514552565993, 39.739494229418405],
          url:
            "https://www.wellruntournaments.com/9-25-2021-war-zone-total-turf-2/",
        },
        {
          name: "WAR Zone at NY Fit Fest",
          date: "2021-09-25",
          location: [-73.65751380564772, 40.58844118379961],
          url:
            "https://www.wellruntournaments.com/9-25-2021-war-zone-ny-fit-fest/",
        },
        {
          name: "WAR Zone at La Bombonera #2",
          date: "2021-10-02",
          location: [-75.59442994411177, 39.646283461379795],
          url:
            "https://www.wellruntournaments.com/8-28-2021-war-zone-la-bombonera-2/",
        },
        {
          name: "WAR Zone at Metuchen Sports Center #1",
          date: "2021-10-03",
          location: [-74.37314035654786, 40.53332966294376],
          url:
            "https://www.wellruntournaments.com/10-3-2021-war-zone-metuchen-sports-center-1/",
        },
        {
          name: "WAR Zone Panhandle Preseason Kickoff",
          date: "2021-10-16",
          location: [-84.22243944306271, 30.384050747604494],
          url:
            "https://www.wellruntournaments.com/10-23-21-panhandle-preseason-kickoff/",
        },
        {
          name: "WAR Zone at Dynamic #14",
          date: "2021-10-17",
          location: [-73.26715440048595, 40.81634041396066],
          url:
            "https://www.wellruntournaments.com/2021/02/22/10-17-2021-war-zone-14-dynamic/",
        },
        {
          name: "WAR Zone at Total Turf #3",
          date: "2021-11-06",
          location: [-75.14514552565993, 39.739494229418405],
          url: "https://www.wellruntournaments.com/4104-2/",
        },
        {
          name: "WAR Zone at Metuchen Sports Center #2",
          date: "2021-11-21",
          location: [-74.37314035654786, 40.53332966294376],
          url:
            "https://www.wellruntournaments.com/11-21-2021-war-zone-metuchen-sports-center-2/",
        },
        {
          name: "WAR Zone at New England Gold #4",
          date: "2021-12-04",
          location: [-71.39364532928666, 42.06056832361408],
          url: "https://www.wellruntournaments.com/4241-2/",
        },
        {
          name: "WAR Zone at Kings Park #3",
          date: "2021-12-19",
          location: [-73.24999207349386, 40.890566338192755],
          url:
            "https://www.wellruntournaments.com/12-19-2021-war-zone-kings-park-3/",
        },
        {
          name: "WAR Zone at Kings Park #4",
          date: "2022-01-06",
          location: [-73.24999207349386, 40.890566338192755],
          url:
            "https://www.wellruntournaments.com/1-16-2022-war-zone-kings-park-4/",
        },
      ];

      mapboxgl.accessToken =
        "pk.eyJ1IjoiY29hY2h3YXluZSIsImEiOiJja3I1OXQxNGkzM29yMm9vOGo4MXlkaWt5In0.hr4oQDHbSpnOwwYOVLPvug";
      let map = new mapboxgl.Map({
        container: "map",
        style: "mapbox://styles/mapbox/streets-v11",
        center: [-95, 38.222335],
        zoom: 3.15,
      });
      /* this portion uses geolocation to track the user and zoom in on them, but they need to click a small button first, and it doesn't seem to work well for the purposes I had in mind. It would be nice if the map loaded showing a 100 mile radius of where the user was located.

      // Initialize the geolocate control.
      var geolocate = new mapboxgl.GeolocateControl({
        positionOptions: {
          enableHighAccuracy: true,
        },
        trackUserLocation: true,
      });
      // Add the control to the map.
      map.addControl(geolocate);
      // Set an event listener that fires
      // when a geolocate event occurs.
      geolocate.on("geolocate", function () {
        console.log("A geolocate event has occurred.");
      });
*/
      let today = new Date().toISOString().split("T")[0];

      //we start by listing all of the upcoming events on the map
      for (let x = 0; x < eventList.length; x++) {
        if (eventList[x].date >= today) {
          let el = document.createElement("div");
          el.className = "marker";
          el.style.backgroundImage =
            "url(https://i.ibb.co/VtYM6tV/Screen-Shot-2021-07-16-at-10-16-46-PM.png)";
          el.style.width = "25px";
          el.style.height = "25px";
          el.style.backgroundSize = "100%";

          new mapboxgl.Marker(el)
            .setLngLat(eventList[x].location)
            .setPopup(
              new mapboxgl.Popup({ offset: 25 }) // add popups
                .setHTML(
                  `<h3>Event: ${eventList[x].name}</h3><h4>Date: ${eventList[x].date}</h4><h2><a href=${eventList[x].url}>click for event details</a></h2>`
                )
            )
            .addTo(map);
        }
      }

      // the customer can press the button to only show events between specified dates
      let getEvents = () => {
        let date1 = document.getElementById("dateInput1").value;
        let date2 = document.getElementById("dateInput2").value;
        map.remove();
        map = new mapboxgl.Map({
          container: "map",
          style: "mapbox://styles/mapbox/streets-v11",
          center: [-95, 38.222335],
          zoom: 3.15,
        });
        for (let x = 0; x < eventList.length; x++) {
          if (eventList[x].date >= date1 && eventList[x].date <= date2) {
            let el = document.createElement("div");
            el.className = "marker";
            el.style.backgroundImage =
              "url(https://i.ibb.co/VtYM6tV/Screen-Shot-2021-07-16-at-10-16-46-PM.png)";
            el.style.width = "25px";
            el.style.height = "25px";
            el.style.backgroundSize = "100%";
            new mapboxgl.Marker(el)
              .setLngLat(eventList[x].location)
              .setPopup(
                new mapboxgl.Popup({ offset: 25 }) // add popups
                  .setHTML(
                    `<h3>Event: ${eventList[x].name}</h3><h4>Date: ${eventList[x].date}</h4><h3><a href=${eventList[x].url}>click for event details</a></h3>`
                  )
              )
              .addTo(map);
          }
        }
      };
    </script>
    <h2>Click on an event to see further details!</h2>
  </body>
</html>
